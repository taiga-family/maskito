<tui-doc-page
    header="Angular"
    path="angular"
>
    <ng-template pageTab="Overview">
        <code>&#64;maskito/angular</code>
        is a light-weighted library to use
        <strong>Maskito</strong>
        in an Angular-way.

        <tui-notification
            appearance="warning"
            size="m"
            class="tui-space_top-6"
        >
            <div>
                <strong>Prerequisites</strong>
                <p class="tui-space_bottom-0">
                    To get the most out of this guide, you should review the topic
                    <a
                        tuiLink
                        [routerLink]="coreConceptsOverviewDocPage"
                    >
                        "Core Concepts"
                    </a>
                    first.
                </p>
            </div>
        </tui-notification>

        <section class="tui-space_top-12">
            <h2>Write less code</h2>

            <ul class="tui-list">
                <li class="tui-list__item">
                    <strong>No need to query element from DOM.</strong>
                    Just pass all required options to
                    <code>[maskito]</code>
                    directive.
                </li>
                <li class="tui-list__item">
                    <strong>No need to worry about clean-ups.</strong>
                    All created event listeners are automatically removed after element is detached from DOM.
                </li>
            </ul>
        </section>

        <section class="tui-space_top-12">
            <h2>Basic directive approach</h2>

            <p>Use it when you have direct access to native input element.</p>

            <tui-doc-code
                filename="your.component.ts"
                [code]="basicDirectiveApproach"
            />
        </section>

        <section class="tui-space_top-12">
            <h2>Nested input element</h2>

            <p>
                Pass a predicate to
                <strong>maskito</strong>
                to find input element for you, if you do not have a direct access to it.
            </p>

            <tui-notification size="m">
                <div>
                    By default
                    <strong>maskito</strong>
                    will try to find input/textarea by querying its host:
                    <code>host.querySelector('input,textarea')</code>
                    so that might be sufficient. Use custom predicate if you need custom logic.
                </div>
            </tui-notification>

            <tui-doc-code
                filename="your.component.ts"
                [code]="customInputExample"
            />
        </section>

        <tui-doc-example
            id="custom-input"
            description="See querying nested input in action"
            heading="Custom input"
            [content]="nestedInputExample"
        >
            <div [style.width.rem]="20">
                <tui-notification
                    size="m"
                    class="tui-space_bottom-3"
                >
                    <div>
                        Default behavior is enough for
                        <a
                            href="https://github.com/taiga-family/taiga-ui"
                            tuiLink
                        >
                            Taiga UI
                        </a>
                        inputs
                    </div>
                </tui-notification>

                <nested-doc-example-1 #example />

                <tui-notification
                    size="m"
                    class="tui-space_vertical-3"
                >
                    Custom predicate is required if target input is not the first on in the DOM
                </tui-notification>

                <nested-doc-example-2
                    [maskito]="example.nameMask"
                    [maskitoElement]="example.predicate"
                />
            </div>
        </tui-doc-example>

        <tui-doc-example
            id="programmatically"
            heading="Set value programmatically"
            [content]="programmaticallyExample"
            [description]="programmaticallyDescription"
        >
            <ng-template #programmaticallyDescription>
                When directly on native input/textarea tag,
                <code>MaskitoDirective</code>
                formats value set programmatically with Angular forms.
            </ng-template>
            <programmatically-doc-example-3 />
        </tui-doc-example>

        <tui-doc-example
            id="pattern"
            description="Alternative way to apply mask on native input"
            heading="Pattern"
            [content]="patternDirectiveExample"
        >
            <pattern-doc-example-6 />
        </tui-doc-example>

        <tui-doc-example
            id="pipe"
            description="Format arbitrary value with the same options"
            heading="Pipe"
            [content]="pipeExample"
        >
            <pipe-doc-example-4 />
        </tui-doc-example>

        <tui-doc-example
            id="unmask"
            heading="Custom unmask handler"
            [content]="customUnmaskHandlerExample"
            [description]="customUnmaskHandlerDescription"
        >
            <ng-template #customUnmaskHandlerDescription>
                According to W3C specification, textfield value should always be only a
                <code>string</code>
                -type (not
                <code>number</code>
                -type, not
                <code>object</code>
                -type or etc.). However, you can sometimes need to store value without mask in Angular form control.
                This example demonstrates how easily any Angular
                <a
                    href="https://angular.dev/api/forms/ControlValueAccessor"
                    target="_blank"
                    tuiLink
                >
                    Control Value Accessor
                </a>
                (default one or any custom one from a third-party UI Kit) can be monkey-patched to achieve this goal.
            </ng-template>
            <custom-unmask-handler-doc-example-5 />
        </tui-doc-example>
    </ng-template>

    <ng-template pageTab="Setup">
        <section>
            <ol class="tui-list tui-list_ordered">
                <li class="tui-list__item">
                    Install libraries
                    <tui-doc-code
                        code="npm install &#64;maskito/{core,angular}"
                        filename="/your/project/path>"
                    />
                </li>
                <li class="tui-list__item tui-space_top-8">
                    Import
                    <code>MaskitoDirective</code>
                    to your component / module

                    <tui-doc-code
                        filename="your.component.ts"
                        [code]="importMaskitoExample"
                    />
                </li>
            </ol>
        </section>
    </ng-template>
</tui-doc-page>
