import{ta as y,ua as f,wa as C,xa as u}from"./chunk-VBDUMDHB.js";import{b as d,k as J,o as E}from"./chunk-YF46TUUO.js";import{a as g,b as P}from"./chunk-ENRHZQ2S.js";function L(e,o){let t=new u({},o);return t.input(e),t.getCountry()}function k({countryIsoCode:e,metadata:o}){let t=!0,r=`+${y(e,o)} `;return({elementState:s,data:n})=>{if(!t)return{elementState:s,data:n};let{value:i,selection:m}=s;if(t=!1,i.startsWith(r))return{elementState:s};try{let p=f(i,e,o);return{elementState:{value:`${r} ${p.nationalNumber}`,selection:m}}}catch{return{elementState:s}}}}function G({phone:e,metadata:o}){return C(e,o)==="TOO_LONG"?G({phone:e.slice(0,e.length-1),metadata:o}):e}var O="x";function M({value:e,template:o,prefix:t}){return[...t,...o?o.slice(t.length).split("").map(r=>r===O||/\d/.test(r)?/\d/:r):new Array(Math.max(e.length-t.length,t.length)).fill(/\d/)]}function T(e,o,t){let r=o&&!o.startsWith("+")?`+${o}`:o;e.input(r.replaceAll(/[^\d+]/g,""));let s=e.getTemplate(),n=s.split(" "),i=n.length>1?`${n.slice(0,2).join(" ")} ${n.slice(2).join(t)}`:s;return e.reset(),i.trim()}function b({currentTemplate:e,newTemplate:o,currentPhoneLength:t,newPhoneLength:r}){return o.length<e.length&&r>t?e:o}var _=3;function l(e){return({value:o,selection:t})=>({value:o.length>_?G({phone:o,metadata:e}):o,selection:t})}function h({prefix:e,countryIsoCode:o,metadata:t}){return({elementState:r,data:s})=>{let{selection:n,value:i}=r,[m]=n,p=m<e.length,c=e.trim();if(i&&!i.startsWith(c)&&!s){let a=new u({defaultCountry:o},t);a.input(i);let x=a.getNumberValue()??"";return a.reset(),{elementState:{value:a.input(x),selection:n}}}try{let a=C(s,{defaultCountry:o},t);if(!a||a==="TOO_SHORT"){let x=o?f(s,o,t):f(s,t),{nationalNumber:A,countryCallingCode:I}=x;return{elementState:{selection:n,value:p?"":e},data:p?`+${I} ${A}`:A}}}catch{return{elementState:r}}return{elementState:r}}}function w({defaultIsoCode:e,metadata:o,separator:t="-"}){let r=new u(e,o),s="+",n="",i=0;return P(g({},d),{mask:({value:m})=>{let p=T(r,m,t),c=m.replaceAll(/\D/g,"").length;return n=b({currentTemplate:n,newTemplate:p,currentPhoneLength:i,newPhoneLength:c}),i=c,n.length===1?["+",/\d/]:M({value:m,template:n,prefix:s})},preprocessors:[h({prefix:s,countryIsoCode:e,metadata:o})],postprocessors:[l(o)]})}function j({countryIsoCode:e,metadata:o,separator:t="-"}){let r=y(e,o),s=new u(e,o),n=`+${r} `,i="",m=0;return P(g({},d),{mask:({value:p})=>{let c=T(s,p,t),a=p.replaceAll(/\D/g,"").length;return i=b({currentTemplate:i,newTemplate:c,currentPhoneLength:m,newPhoneLength:a}),m=a,M({value:p,template:i,prefix:n})},plugins:[E((p,[c,a])=>[c===a?n.length:0,p.length])],preprocessors:[k({countryIsoCode:e,metadata:o}),h({prefix:n,countryIsoCode:e,metadata:o})],postprocessors:[J(n),l(o)]})}function N({countryIsoCode:e,metadata:o,strict:t=!0,separator:r="-"}){return t&&e?j({countryIsoCode:e,metadata:o,separator:r}):w({defaultIsoCode:e,metadata:o,separator:r})}export{L as a,N as b};
