import{b as V}from"./chunk-DRW3Z7S4.js";import{e as k,g as E,l as J}from"./chunk-D6FC3ZWN.js";import{Eb as L,Mb as R,Na as F,Nb as U,Ob as B,Vc as K,dc as q,fa as A,kc as H,la as T,of as W,rf as G,sb as w}from"./chunk-BRMP23IT.js";import{a as u,b as g,i as b}from"./chunk-6M32EY24.js";var h=class h{};h.\u0275fac=function(n){return new(n||h)},h.\u0275cmp=w({type:h,selectors:[["stackblitz-edit-button"]],decls:2,vars:0,consts:[["appearance","flat","iconStart","assets/icons/stackblitz.svg","size","s","title","Edit on StackBlitz","tuiButton","","type","button"]],template:function(n,i){n&1&&(R(0,"button",0),q(1," Edit "),U())},dependencies:[W],styles:["@media screen and (max-width: 47.9625em){button[_ngcontent-%COMP%]{font-size:0;margin-inline-end:-1rem}}"],changeDetection:0});var _=h;var Y={name:"@maskito/phone",version:"4.0.0",description:"The optional framework-agnostic Maskito's package with phone masks",keywords:["input","mask","inputmask","input-mask","phone","phonemask","phone-mask","format","input-format","input-formatting","javascript","typescript"],homepage:"https://maskito.dev",bugs:"https://github.com/taiga-family/maskito/issues",repository:{type:"git",url:"https://github.com/taiga-family/maskito.git"},license:"Apache-2.0",author:{name:"Vladimir Potekhin",email:"vladimir.potekh@gmail.com",url:"https://github.com/vladimirpotekhin"},contributors:["Alex Inkin <alexander@inkin.ru> (https://twitter.com/waterplea)","Maksim Ivanov <splincodewd@yandex.ru>","Vladimir Potekhin <vladimir.potekh@gmail.com>","Nikita Barsukov <nikita.s.barsukov@gmail.com>"],devDependencies:{"libphonenumber-js":"1.12.25"},peerDependencies:{"@maskito/core":"^4.0.0","@maskito/kit":"^4.0.0","libphonenumber-js":">=1.0.0"}};var pe="https://stackblitz.com",Q=["angular-cli","create-react-app","html","javascript","node","polymer","typescript","vue"],le=["project","search","ports","settings"],de=["light","dark"],me=["editor","preview"],Z={clickToLoad:e=>l("ctl",e),devToolsHeight:e=>ee("devtoolsheight",e),forceEmbedLayout:e=>l("embed",e),hideDevTools:e=>l("hidedevtools",e),hideExplorer:e=>l("hideExplorer",e),hideNavigation:e=>l("hideNavigation",e),openFile:e=>P("file",e),showSidebar:e=>ue("showSidebar",e),sidebarView:e=>v("sidebarView",e,le),startScript:e=>P("startScript",e),terminalHeight:e=>ee("terminalHeight",e),theme:e=>v("theme",e,de),view:e=>v("view",e,me),zenMode:e=>l("zenMode",e),organization:e=>`${P("orgName",e==null?void 0:e.name)}&${P("orgProvider",e==null?void 0:e.provider)}`,crossOriginIsolated:e=>l("corp",e)};function te(e={}){let t=Object.entries(e).map(([n,i])=>i!=null&&Z.hasOwnProperty(n)?Z[n](i):"").filter(Boolean);return t.length?`?${t.join("&")}`:""}function l(e,t){return t===!0?`${e}=1`:""}function ue(e,t){return typeof t=="boolean"?`${e}=${t?"1":"0"}`:""}function ee(e,t){if(typeof t=="number"&&!Number.isNaN(t)){let n=Math.min(100,Math.max(0,t));return`${e}=${encodeURIComponent(Math.round(n))}`}return""}function v(e,t="",n=[]){return n.includes(t)?`${e}=${encodeURIComponent(t)}`:""}function P(e,t){return(Array.isArray(t)?t:[t]).filter(i=>typeof i=="string"&&i.trim()!=="").map(i=>`${e}=${encodeURIComponent(i)}`).join("&")}function ne(){return Math.random().toString(36).slice(2,6)+Math.random().toString(36).slice(2,6)}function $(e,t){return`${ie(t)}${e}${te(t)}`}function x(e,t){let n={forceEmbedLayout:!0};return t&&typeof t=="object"&&Object.assign(n,t),`${ie(n)}${e}${te(n)}`}function ie(e={}){return(typeof e.origin=="string"?e.origin:pe).replace(/\/$/,"")}function M(e,t,n){if(!t||!e||!e.parentNode)throw new Error("Invalid Element");e.id&&(t.id=e.id),e.className&&(t.className=e.className),he(t,n),fe(e,t,n),e.replaceWith(t)}function N(e){if(typeof e=="string"){let t=document.getElementById(e);if(!t)throw new Error(`Could not find element with id '${e}'`);return t}else if(e instanceof HTMLElement)return e;throw new Error(`Invalid element: ${e}`)}function O(e){return e&&e.newWindow===!1?"_self":"_blank"}function he(e,t={}){let n=Object.hasOwnProperty.call(t,"height")?`${t.height}`:"300",i=Object.hasOwnProperty.call(t,"width")?`${t.width}`:void 0;e.setAttribute("height",n),i?e.setAttribute("width",i):e.setAttribute("style","width:100%;")}function fe(e,t,n={}){var o,r;let i=((r=(o=e.allow)==null?void 0:o.split(";"))==null?void 0:r.map(a=>a.trim()))??[];n.crossOriginIsolated&&!i.includes("cross-origin-isolated")&&i.push("cross-origin-isolated"),i.length>0&&(t.allow=i.join("; "))}var I=class{constructor(t){this.pending={},this.port=t,this.port.onmessage=this.messageListener.bind(this)}request({type:t,payload:n}){return new Promise((i,o)=>{let r=ne();this.pending[r]={resolve:i,reject:o},this.port.postMessage({type:t,payload:g(u({},n),{__reqid:r})})})}messageListener(t){var c;if(typeof((c=t.data.payload)==null?void 0:c.__reqid)!="string")return;let{type:n,payload:i}=t.data,{__reqid:o,__success:r,__error:a}=i;this.pending[o]&&(r?this.pending[o].resolve(this.cleanResult(i)):this.pending[o].reject(a?`${n}: ${a}`:n),delete this.pending[o])}cleanResult(t){let n=u({},t);return delete n.__reqid,delete n.__success,delete n.__error,Object.keys(n).length?n:null}},D=class{constructor(t,n){this.editor={openFile:i=>this._rdc.request({type:"SDK_OPEN_FILE",payload:{path:i}}),setCurrentFile:i=>this._rdc.request({type:"SDK_SET_CURRENT_FILE",payload:{path:i}}),setTheme:i=>this._rdc.request({type:"SDK_SET_UI_THEME",payload:{theme:i}}),setView:i=>this._rdc.request({type:"SDK_SET_UI_VIEW",payload:{view:i}}),showSidebar:(i=!0)=>this._rdc.request({type:"SDK_TOGGLE_SIDEBAR",payload:{visible:i}})},this.preview={origin:"",getUrl:()=>this._rdc.request({type:"SDK_GET_PREVIEW_URL",payload:{}}).then(i=>(i==null?void 0:i.url)??null),setUrl:(i="/")=>{if(typeof i!="string"||!i.startsWith("/"))throw new Error(`Invalid argument: expected a path starting with '/', got '${i}'`);return this._rdc.request({type:"SDK_SET_PREVIEW_URL",payload:{path:i}})}},this._rdc=new I(t),Object.defineProperty(this.preview,"origin",{value:typeof n.previewOrigin=="string"?n.previewOrigin:null,writable:!1})}applyFsDiff(t){let n=i=>i!==null&&typeof i=="object";if(!n(t)||!n(t.create))throw new Error("Invalid diff object: expected diff.create to be an object.");if(!Array.isArray(t.destroy))throw new Error("Invalid diff object: expected diff.destroy to be an array.");return this._rdc.request({type:"SDK_APPLY_FS_DIFF",payload:t})}getDependencies(){return this._rdc.request({type:"SDK_GET_DEPS_SNAPSHOT",payload:{}})}getFsSnapshot(){return this._rdc.request({type:"SDK_GET_FS_SNAPSHOT",payload:{}})}},S=[],C=class{constructor(t){this.id=ne(),this.element=t,this.pending=new Promise((n,i)=>{let o=({data:s,ports:p})=>{(s==null?void 0:s.action)==="SDK_INIT_SUCCESS"&&s.id===this.id&&(this.vm=new D(p[0],s.payload),n(this.vm),a())},r=()=>{var s;(s=this.element.contentWindow)==null||s.postMessage({action:"SDK_INIT",id:this.id},"*")};function a(){window.clearInterval(m),window.removeEventListener("message",o)}window.addEventListener("message",o),r();let c=0,m=window.setInterval(()=>{if(this.vm){a();return}if(c>=20){a(),i("Timeout: Unable to establish a connection with the StackBlitz VM"),S.forEach((s,p)=>{s.id===this.id&&S.splice(p,1)});return}c++,r()},500)}),S.push(this)}},ge=e=>{let t=e instanceof Element?"element":"id";return S.find(n=>n[t]===e)??null};function be(e,t){let n=document.createElement("input");return n.type="hidden",n.name=e,n.value=t,n}function ye(e){return e.replace(/\[/g,"%5B").replace(/\]/g,"%5D")}function oe({template:e,title:t,description:n,dependencies:i,files:o,settings:r}){if(!Q.includes(e)){let s=Q.map(p=>`'${p}'`).join(", ");console.warn(`Unsupported project.template: must be one of ${s}`)}let a=[],c=(s,p,se="")=>{a.push(be(s,typeof p=="string"?p:se))};c("project[title]",t),typeof n=="string"&&n.length>0&&c("project[description]",n),c("project[template]",e,"javascript"),i&&(e==="node"?console.warn("Invalid project.dependencies: dependencies must be provided as a 'package.json' file when using the 'node' template."):c("project[dependencies]",JSON.stringify(i))),r&&c("project[settings]",JSON.stringify(r)),Object.entries(o).forEach(([s,p])=>{c(`project[files][${ye(s)}]`,p)});let m=document.createElement("form");return m.method="POST",m.setAttribute("style","display:none!important;"),m.append(...a),m}function we(e,t){let n=oe(e);return n.action=x("/run",t),n.id="sb_run",`<!doctype html>
<html>
<head><title></title></head>
<body>
  ${n.outerHTML}
  <script>document.getElementById('${n.id}').submit();<\/script>
</body>
</html>`}function ke(e,t){let n=oe(e);n.action=$("/run",t),n.target=O(t),document.body.appendChild(n),n.submit(),document.body.removeChild(n)}function j(e){return e!=null&&e.contentWindow?(ge(e)??new C(e)).pending:Promise.reject("Provided element is not an iframe.")}function Ee(e,t){ke(e,t)}function _e(e,t){let n=$(`/edit/${e}`,t),i=O(t);window.open(n,i)}function Pe(e,t){let n=$(`/github/${e}`,t),i=O(t);window.open(n,i)}function Se(e,t,n){var a;let i=N(e),o=we(t,n),r=document.createElement("iframe");return M(i,r,n),(a=r.contentDocument)==null||a.write(o),j(r)}function je(e,t,n){let i=N(e),o=document.createElement("iframe");return o.src=x(`/edit/${t}`,n),M(i,o,n),j(o)}function Te(e,t,n){let i=N(e),o=document.createElement("iframe");return o.src=x(`/github/${t}`,n),M(i,o,n),j(o)}var z={connect:j,embedGithubProject:Te,embedProject:Se,embedProjectId:je,openGithubProject:Pe,openProject:Ee,openProjectId:_e};var d=class d{constructor(){this.baseProjectConfigs={template:"typescript",dependencies:{"@maskito/core":"latest","@maskito/kit":"latest","@maskito/phone":"latest","libphonenumber-js":Y.peerDependencies["libphonenumber-js"]}};this.name="Stackblitz";this.content=new G(_)}edit(t,n,i){return b(this,null,function*(){let[o="",r=""]=yield Promise.all([import("./chunk-OC2CZ6YR.js"),import("./chunk-SM6XWVGC.js")].map(E));return z.openProject(g(u({},this.baseProjectConfigs),{title:`maskito/${t}/${n}`,description:`Maskito example of the component ${t}`,files:{"index.html":t.includes("textarea")?"<textarea></textarea>":"<input />","styles.css":r,"index.ts":k(o)[0]??"","mask.ts":i[V.MaskitoOptions]??""}}),{openFile:"index.ts,mask.ts"})})}openStarter({title:t,description:n,files:i},o){return z.openProject(g(u({},this.baseProjectConfigs),{title:t,description:n,files:i}),o)}};d.\u0275fac=function(n){return new(n||d)},d.\u0275prov=A({token:d,factory:d.\u0275fac});var y=d;var f=class f{constructor(){this.platformId=T(F);this.stackblitz=T(y)}ngOnInit(){return b(this,null,function*(){K(this.platformId)&&(yield this.openStackblitz())})}openStackblitz(){return b(this,null,function*(){let[t="",n=""]=yield Promise.all([import("./chunk-EUMMBWO7.js"),import("./chunk-SM6XWVGC.js")].map(E));return this.stackblitz.openStarter({title:"Maskito Starter",description:`A starter with Maskito library
Documentation: https://maskito.dev`,files:{"index.html":"<input />","index.ts":k(t)[0],"styles.css":n}},{newWindow:!1,openFile:"index.ts",hideExplorer:!0})})}};f.\u0275fac=function(n){return new(n||f)},f.\u0275cmp=w({type:f,selectors:[["stackblitz-starter"]],features:[H([y])],decls:1,vars:1,consts:[["size","xxl","textContent","Stackblitz loading...",1,"loader",3,"overlay"]],template:function(n,i){n&1&&B(0,"tui-loader",0),n&2&&L("overlay",!0)},dependencies:[J],styles:[".loader[_ngcontent-%COMP%]{position:fixed;top:0;left:0;inline-size:100%;block-size:100%;z-index:1;background:var(--tui-background-base)}"],changeDetection:0});var re=f;export{_ as a,y as b,re as c};
