import{ta as T,ua as u,wa as S,xa as l,za as g}from"./chunk-A3MKVMVU.js";import{b as A,k as R,o as w}from"./chunk-5FYD33JE.js";import{a as M,b as y}from"./chunk-TIC6Q35B.js";function L(r,e){let t=new l({},e);return t.input(r),t.getCountry()}function $(r,e,t){let o=new l(e,t);o.input(r);let n=o.getNumberValue()??"";return o.reset(),n}function _(r,e,t){let o=$(r,e,t);if(!o)return"";try{let n=u(o,e,t);return g(n.nationalNumber,e,t)}catch{return""}}function k({prefix:r,countryIsoCode:e,metadata:t,format:o="INTERNATIONAL"}){let n=o==="NATIONAL";return({elementState:i,data:a})=>{let{selection:s,value:p}=i,c=r.trim();if(p&&!a){if(n&&p.startsWith("+")&&e){let m=_(p,e,t);if(m)return{elementState:{value:m,selection:s}}}else if(!n&&!p.startsWith(c)){let m=$(p,e,t);return{elementState:{value:new l(e,t).input(m),selection:s}}}}return{elementState:i}}}function d({countryIsoCode:r,metadata:e,format:t}){let o=!0,n=`+${T(r,e)} `;return({elementState:i,data:a})=>{if(!o)return{elementState:i,data:a};let{value:s,selection:p}=i;if(o=!1,t==="INTERNATIONAL"&&s.startsWith(n)||t==="NATIONAL"&&!s.startsWith("+"))return{elementState:i};try{let{nationalNumber:c}=u(s,r,e);return{elementState:{value:t==="NATIONAL"?g(c,r,e):`${n} ${c}`,selection:p}}}catch{return{elementState:i}}}}function z({data:r,prefix:e,countryIsoCode:t,metadata:o}){if(!r.startsWith(e)&&t)try{return u(`+${r}`,t,o)}catch{return u(r,t,o)}return u(r,o)}function O({prefix:r,countryIsoCode:e,metadata:t}){return({elementState:o,data:n})=>({elementState:o,data:n.length>2&&o.value===""?z({data:n,prefix:r,countryIsoCode:e,metadata:t}).number:n})}function G({prefix:r,countryIsoCode:e,metadata:t,format:o="INTERNATIONAL"}){let n=o==="NATIONAL";return({elementState:i,data:a})=>{let{selection:s,value:p}=i,[c]=s,m=c<r.length;if(a.length>2&&p.trim()===r.trim()){let h=e?u(a,e,t):u(a,t),{nationalNumber:P,countryCallingCode:V}=h;return n&&e?{elementState:{selection:s,value:""},data:P}:{elementState:{selection:s,value:m?"":r},data:m?`+${V} ${P}`:P}}return{elementState:i}}}function I({phone:r,metadata:e}){return S(r,e)==="TOO_LONG"?I({phone:r.slice(0,r.length-1),metadata:e}):r}var E="x";function b({value:r,template:e,prefix:t}){return[...t,...e?e.slice(t.length).split("").map(o=>o===E||/\d/.test(o)?/\d/:o):new Array(Math.max(r.length-t.length,t.length)).fill(/\d/)]}function x({formatter:r,value:e,separator:t,countryIsoCode:o,metadata:n,format:i="INTERNATIONAL"}){if(i==="NATIONAL"&&o&&n){let s=e&&!e.startsWith("+")?`+${e}`:e;return r.input(s.replaceAll(/[^\d+]/g,"")),W({value:s,countryIsoCode:o,metadata:n,separator:t})}return D({formatter:r,value:e,separator:t})}function D({formatter:r,value:e,separator:t}){if(!/[\d+]/.test(e))return"";let n=e.startsWith("+")?e:`+${e}`;r.input(n.replaceAll(/[^\d+]/g,""));let i=r.getTemplate(),a=i.split(" "),s=a.length>1?`${a.slice(0,2).join(" ")} ${a.slice(2).join(t)}`:i;return r.reset(),s.trim()}function W({value:r,countryIsoCode:e,metadata:t,separator:o}){let n=r.replaceAll(/\D/g,"");if(!n)return"";let i=g(n,e,t),a=i.replaceAll(/\d/g,"x");if(a.includes(")"))return a.replaceAll("-",o);if(!i.includes("-")){let s=a.split(" ");return s.length>1?`${s[0]} ${s.slice(1).join(o)}`:a}return a.replaceAll("-",o)}function C({currentTemplate:r,newTemplate:e,currentPhoneLength:t,newPhoneLength:o}){return e.length<r.length&&o>t?r:e}var Y=3;function f(r){return({value:e,selection:t})=>({value:e.length>Y?I({phone:e,metadata:r}):e,selection:t})}var N=({elementState:r,data:e})=>({elementState:r,data:(e??"").replaceAll(/[^\d+]/g,"")});function F({defaultIsoCode:r,metadata:e,separator:t="-"}){let o=new l(r,e),n="+",i="",a=0;return y(M({},A),{mask:({value:s})=>{let p=x({formatter:o,value:s,separator:t}),c=s.replaceAll(/\D/g,"").length;return i=C({currentTemplate:i,newTemplate:p,currentPhoneLength:a,newPhoneLength:c}),a=c,i.length===1?["+",/\d/]:b({value:s,template:i,prefix:n})},preprocessors:[N,k({prefix:n,countryIsoCode:r,metadata:e}),O({prefix:n,countryIsoCode:r,metadata:e})],postprocessors:[f(e)]})}function j({countryIsoCode:r,metadata:e,separator:t="-",format:o="INTERNATIONAL"}){let n=o==="NATIONAL",i=T(r,e),a=new l(r,e),s=n?"":`+${i} `,p="",c=0;return y(M({},A),{mask:({value:m})=>{let h=x({formatter:a,value:m,separator:t,countryIsoCode:r,metadata:e,format:o}),P=m.replaceAll(/\D/g,"").length;return p=C({currentTemplate:p,newTemplate:h,currentPhoneLength:c,newPhoneLength:P}),c=P,b({value:m,template:p,prefix:s})},plugins:[w((m,[h,P])=>[h===P?s.length:0,m.length])],preprocessors:[N,d({countryIsoCode:r,metadata:e,format:o}),k({prefix:s,countryIsoCode:r,metadata:e,format:o}),G({prefix:s,countryIsoCode:r,metadata:e,format:o})],postprocessors:n?[f(e)]:[R(s),f(e)]})}function J({countryIsoCode:r,metadata:e,strict:t=!0,separator:o="-",format:n="INTERNATIONAL"}){return t&&r?j({countryIsoCode:r,metadata:e,separator:o,format:n}):F({defaultIsoCode:r,metadata:e,separator:o})}export{L as a,J as b};
