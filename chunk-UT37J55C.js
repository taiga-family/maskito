import{ta as d,ua as f,wa as y,xa as c,za as P}from"./chunk-3QXINF2X.js";import{b as M,k as J,o as F}from"./chunk-CC6UP3G4.js";import{a as N,b as T}from"./chunk-TIC6Q35B.js";function C(e,t){let o=new c({},t);return o.input(e),o.getCountry()}function A({countryIsoCode:e,metadata:t,format:o}){let r=!0,s=`+${d(e,t)} `;return({elementState:i,data:a})=>{if(!r)return{elementState:i,data:a};let{value:n,selection:p}=i;if(r=!1,o==="INTERNATIONAL"&&n.startsWith(s)||o==="NATIONAL"&&!n.startsWith("+"))return{elementState:i};try{let{nationalNumber:l}=f(n,e,t);return{elementState:{value:o==="NATIONAL"?P(l,e,t):`${s} ${l}`,selection:p}}}catch{return{elementState:i}}}}function G({phone:e,metadata:t}){return y(e,t)==="TOO_LONG"?G({phone:e.slice(0,e.length-1),metadata:t}):e}var I="x";function O({value:e,template:t,prefix:o}){return[...o,...t?t.slice(o.length).split("").map(r=>r===I||/\d/.test(r)?/\d/:r):new Array(Math.max(e.length-o.length,o.length)).fill(/\d/)]}function L({formatter:e,value:t,separator:o,countryIsoCode:r,metadata:s,format:i="INTERNATIONAL"}){if(i==="NATIONAL"&&r&&s){let n=t&&!t.startsWith("+")?`+${t}`:t;return e.input(n.replaceAll(/[^\d+]/g,"")),S({value:n,countryIsoCode:r,metadata:s,separator:o})}return _({formatter:e,value:t,separator:o})}function _({formatter:e,value:t,separator:o}){if(!/[\d+]/.test(t))return"";let s=t.startsWith("+")?t:`+${t}`;e.input(s.replaceAll(/[^\d+]/g,""));let i=e.getTemplate(),a=i.split(" "),n=a.length>1?`${a.slice(0,2).join(" ")} ${a.slice(2).join(o)}`:i;return e.reset(),n.trim()}function S({value:e,countryIsoCode:t,metadata:o,separator:r}){let s=e.replaceAll(/\D/g,"");if(!s)return"";let i=P(s,t,o),a=i.replaceAll(/\d/g,"x");if(a.includes(")"))return a.replaceAll("-",r);if(!i.includes("-")){let n=a.split(" ");return n.length>1?`${n[0]} ${n.slice(1).join(r)}`:a}return a.replaceAll("-",r)}function b({currentTemplate:e,newTemplate:t,currentPhoneLength:o,newPhoneLength:r}){return t.length<e.length&&r>o?e:t}var V=3;function h(e){return({value:t,selection:o})=>({value:t.length>V?G({phone:t,metadata:e}):t,selection:o})}function $(e,t,o){let r=new c(t,o);r.input(e);let s=r.getNumberValue()??"";return r.reset(),s}function D(e,t,o){let r=$(e,t,o);if(!r)return"";try{let s=f(r,t,o);return P(s.nationalNumber,t,o)}catch{return""}}function g({prefix:e,countryIsoCode:t,metadata:o,format:r="INTERNATIONAL"}){let s=r==="NATIONAL";return({elementState:i,data:a})=>{let{selection:n,value:p}=i,[l]=n,u=e.length>0&&l<e.length,k=e.trim();if(p&&!a){if(s&&p.startsWith("+")&&t){let m=D(p,t,o);if(m)return{elementState:{value:m,selection:n}}}else if(!s&&!p.startsWith(k)){let m=$(p,t,o);return{elementState:{value:new c(t,o).input(m),selection:n}}}}try{let m=y(a,{defaultCountry:t},o);if(!m||m==="TOO_SHORT"){let R=t?f(a,t,o):f(a,o),{nationalNumber:x,countryCallingCode:j}=R;return s&&t?{elementState:{selection:n,value:""},data:x}:{elementState:{selection:n,value:u?"":e},data:u?`+${j} ${x}`:x}}}catch{return{elementState:i}}return{elementState:i}}}function v({defaultIsoCode:e,metadata:t,separator:o="-"}){let r=new c(e,t),s="+",i="",a=0;return T(N({},M),{mask:({value:n})=>{let p=L({formatter:r,value:n,separator:o}),l=n.replaceAll(/\D/g,"").length;return i=b({currentTemplate:i,newTemplate:p,currentPhoneLength:a,newPhoneLength:l}),a=l,i.length===1?["+",/\d/]:O({value:n,template:i,prefix:s})},preprocessors:[g({prefix:s,countryIsoCode:e,metadata:t})],postprocessors:[h(t)]})}function w({countryIsoCode:e,metadata:t,separator:o="-",format:r="INTERNATIONAL"}){let s=r==="NATIONAL",i=d(e,t),a=new c(e,t),n=s?"":`+${i} `,p="",l=0;return T(N({},M),{mask:({value:u})=>{let k=L({formatter:a,value:u,separator:o,countryIsoCode:e,metadata:t,format:r}),m=u.replaceAll(/\D/g,"").length;return p=b({currentTemplate:p,newTemplate:k,currentPhoneLength:l,newPhoneLength:m}),l=m,O({value:u,template:p,prefix:n})},plugins:[F((u,[k,m])=>[k===m?n.length:0,u.length])],preprocessors:[A({countryIsoCode:e,metadata:t,format:r}),g({prefix:n,countryIsoCode:e,metadata:t,format:r})],postprocessors:s?[h(t)]:[J(n),h(t)]})}function E({countryIsoCode:e,metadata:t,strict:o=!0,separator:r="-",format:s="INTERNATIONAL"}){return o&&e?w({countryIsoCode:e,metadata:t,separator:r,format:s}):v({defaultIsoCode:e,metadata:t,separator:r})}export{C as a,E as b};
