import{Da as J,Ha as E,Sa as y,Ta as f,Va as C,Wa as c,ra as d}from"./chunk-6QOZUR2C.js";import{a as g,b as P}from"./chunk-6M32EY24.js";function L(o,e){let t=new c({},e);return t.input(o),t.getCountry()}function k({countryIsoCode:o,metadata:e}){let t=!0;return({elementState:r,data:s})=>{if(!t)return{elementState:r,data:s};let{value:n,selection:i}=r;t=!1;try{let m=f(n,o,e);return{elementState:{value:`+${y(o,e)} ${m.nationalNumber}`,selection:i}}}catch{return{elementState:r}}}}function G({phone:o,metadata:e}){return C(o,e)==="TOO_LONG"?G({phone:o.slice(0,o.length-1),metadata:e}):o}var O="x";function M({value:o,template:e,prefix:t}){return[...t,...e?e.slice(t.length).split("").map(r=>r===O||/\d/.test(r)?/\d/:r):new Array(Math.max(o.length-t.length,t.length)).fill(/\d/)]}function T(o,e,t){o.input(e.replaceAll(/[^\d+]/g,""));let r=o.getTemplate(),s=r.split(" "),n=s.length>1?`${s.slice(0,2).join(" ")} ${s.slice(2).join(t)}`:r;return o.reset(),n.trim()}function b({currentTemplate:o,newTemplate:e,currentPhoneLength:t,newPhoneLength:r}){return e.length<o.length&&r>t?o:e}var I=3;function l(o){return({value:e,selection:t})=>({value:e.length>I?G({phone:e,metadata:o}):e,selection:t})}function h({prefix:o,countryIsoCode:e,metadata:t}){return({elementState:r,data:s})=>{let{selection:n,value:i}=r,[m]=n,a=m<o.length,u=o.trim();if(i&&!i.startsWith(u)&&!s){let p=new c({defaultCountry:e},t);p.input(i);let x=p.getNumberValue()??"";return p.reset(),{elementState:{value:p.input(x),selection:n}}}try{let p=C(s,{defaultCountry:e},t);if(!p||p==="TOO_SHORT"){let x=e?f(s,e,t):f(s,t),{nationalNumber:A,countryCallingCode:v}=x;return{elementState:{selection:n,value:a?"":o},data:a?`+${v} ${A}`:A}}}catch{return{elementState:r}}return{elementState:r}}}function w({defaultIsoCode:o,metadata:e,separator:t="-"}){let r=new c(o,e),s="+",n="",i=0;return P(g({},d),{mask:({value:m})=>{let a=T(r,m,t),u=m.replaceAll(/\D/g,"").length;return n=b({currentTemplate:n,newTemplate:a,currentPhoneLength:i,newPhoneLength:u}),i=u,n.length===1?["+",/\d/]:M({value:m,template:n,prefix:s})},preprocessors:[h({prefix:s,countryIsoCode:o,metadata:e})],postprocessors:[l(e)]})}function j({countryIsoCode:o,metadata:e,separator:t="-"}){let r=y(o,e),s=new c(o,e),n=`+${r} `,i="",m=0;return P(g({},d),{mask:({value:a})=>{let u=T(s,a,t),p=a.replaceAll(/\D/g,"").length;return i=b({currentTemplate:i,newTemplate:u,currentPhoneLength:m,newPhoneLength:p}),m=p,M({value:a,template:i,prefix:n})},plugins:[E((a,[u,p])=>[u===p?n.length:0,a.length])],preprocessors:[k({countryIsoCode:o,metadata:e}),h({prefix:n,countryIsoCode:o,metadata:e})],postprocessors:[J(n),l(e)]})}function N({countryIsoCode:o,metadata:e,strict:t=!0,separator:r="-"}){return t&&o?j({countryIsoCode:o,metadata:e,separator:r}):w({defaultIsoCode:o,metadata:e,separator:r})}export{L as a,N as b};
